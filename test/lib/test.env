export SYSDEN64_PATH_ROOT=$(pwd)/src
export SYSDEN64_PATH_BL64=$(pwd)/lib/bl64
export SYSDEN64_PATH_DEVBIN64=/opt/devbin64
export SYSDEN64_PATH_LIB="$SYSDEN64_PATH_ROOT/lib"
export SYSDEN64_PATH_ETC="$SYSDEN64_PATH_ROOT/etc"
export DEV_BOOTSTRAP_PATH_ROOT="$SYSDEN64_PATH_DEVBIN64"
export BL64_LIB_CICD="YES"

if [[ "$(uname -s)" == 'Linux' ]]; then
  if [[ "$DEV_TEST_BASH_CONTAINER_ENVIRONMENT" != 'ON' ]]; then
    echo 'error: Test must be executed inside a container'
    exit 1
  fi
else
  if [[ "$DEV_TEST_BASH_RUNNER_ENVIRONMENT" != 'ON' ]]; then
    echo 'error: Test must be executed inside a CICD runner'
    exit 1
  fi
fi

if [[ ! -d "$SYSDEN64_PATH_DEVBIN64" ]]; then
  INST64_BASHLIB64="$SYSDEN64_PATH_BL64" sudo -E ./lib/inst64/install-devbin64 ||
  exit $?
fi
exit 0
